\makeatletter

% An environment for a solution that is included inline.
\newenvironment{SolutionInline}{{\noindent \bf Solution:}}{}

% An environment that makes a solution completely invisible.
\newenvironment{SolutionHidden}
 {\@bsphack
  \let\do\@makeother\dospecials\catcode`\^^M\active
  \def\verbatim@processline{}%
 \verbatim@start}%
{\@esphack\par\vspace{2ex}}

%\newenvironment{solution}{\SolutionInline}{\endSolutionInline}
\newenvironment{solution}{\SolutionHidden}{\endSolutionHidden}

\makeatother

\theoremstyle{definition}
\newtheorem{exercise}{Exercise}

